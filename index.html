<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NeuroFlow Studio Cient</title>

  <!-- bootstrap v5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <!--  -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.min.js"></script>
  <script src="https://unpkg.com/ml5@0.20.0-alpha.4/dist/ml5.min.js"></script>

  <!-- stylesheet -->
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="stylesheet" href="./assets/css/navbar_style.css">
  <link rel="stylesheet" href="./assets/css/config_style.css">
</head>

<body>
  <!-- navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">NeuroFlow Studio</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="/index.html">Configuration</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./pages/eeg_charts.html">EEG Charts</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./pages/record_studio.html">Record Studio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./pages/data_studio.html">Data Studio</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./pages/osc_server.html">OSC Server</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./pages/device_details.html">Device Details</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- charts wrapper -->
  <div class="container-fluid universal-container">
    <div id="config-wrapper">
      <!-- live feed -->
      <div id="live-feed">
        <div class="grid-hr"></div>
        <div class="grid-vr"></div>
        <div id="canvas-container"></div>
      </div>

      <!-- webgl preview -->
      <div id="webgl-preview">
        <div class="grid-hr"></div>
        <div class="grid-vr"></div>
        <canvas id="glcanvas" tabindex="1"></canvas>
      </div>
    </div>
  </div>

  <!-- bootstrap js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <!-- ml5js -->
  <script src="./assets/js/ml5/detect.js"></script>

  <!-- cables gl -->
  <script type="text/javascript" src="./assets/js/webgl/js/patch.js" async></script>

  <script type="text/javascript">

    function showError(errId, errMsg) {
      // handle critical errors here if needed
    }

    function patchInitialized(patch) {
      // You can now access the patch object (patch), register variable watchers and so on
    }

    function patchFinishedLoading(patch) {
      // The patch is ready now, all assets have been loaded
    }

    document.addEventListener("CABLES.jsLoaded", function (event) {
      CABLES.patch = new CABLES.Patch({
        patch: CABLES.exportedPatch,
        "prefixAssetPath": "",
        "assetPath": "assets/",
        "jsPath": "js/",
        "glCanvasId": "glcanvas",
        "glCanvasResizeToWindow": true,
        "onError": showError,
        "onPatchLoaded": patchInitialized,
        "onFinishedLoading": patchFinishedLoading,
        "canvas": { "alpha": true, "premultipliedAlpha": true } // make canvas transparent
      });
    });


    // disable rubberband effect on mobile devices
    document.getElementById('glcanvas').addEventListener('touchmove', (e) => { e.preventDefault(); }, false);
  </script>
</body>

</html>